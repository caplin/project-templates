# Caplin Legacy JTM Template

This project provides a starting point for writing a Java based Transformer Module on the Java Transformer module API. The build is written in gradle and requires either a local installation of gradle or an internet connection over which gradle can be downloaded. This is done seamlessly with the provided `gradlew` script files.
This template is deprecated and should only be used pre Caplin Platform version 7.0

## Getting started
This section outlines the basic steps necessary to build and deploy the module.

1. download/clone the repository
2. change the project name in settings.gradle. This will be used as the name for the artifact.
3. change the username and password in the `build.gradle` file to your caplin credentials
4. run `gradle assemble`
5. deploy the zip file created in `build/distributions/` into your Deployment Framework
7. start Transformer with `./dfw start Transformer`


## Development modes
Because Transformer modules are loaded into Transformer on startup it is not possible to start and stop the module from an IDE. For that reason there does not exist a `config only` option in this build. The only way to integrate an IDE with the module is to use remote debugging. To set this up change the variable `TRANSFORMER_JVM_DEBUGGER_PORT` in the file `global_config/overrides/servers/Transformer/java.conf` to a valid port number and set up a remote debugging configuration in your IDE matching this port.

### Develop with access to a local DFW
In order for the Transformer to know about the module, it's configuration needs to be deployed. A Transformer module essentially is a jar file that gets loaded by Transformer when it starts up. After deploying the module and starting Transformer it will start operation.

1. run `gradle assemble`
2. deploy the zip file created in `build/distributions/` into your Deployment Framework
3. **Optional:** Symlink the module jar file in `active_blades/<your_module>/Transformer/lib/java/<your_module.jar>` to the jar file generated by your IDE to speed up the deployment cycle
4. start Transformer `./dfw start Transformer`


### Connect an adapter from an IDE to a remote DFW
There are no differences from developing a Transformer module with a local or remote DFW. Using a remote DFW however does not allow for the optional step3 (symlinking the jar file). In addition to this, it is vital that the port on the remote machine is open if remote debugging is desirable.


## Issues
For issues with the templates please contact Caplin Support or raise an issue on Github.
